<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Title Transfer | AutoGaard Workshop</title>
    <link rel="stylesheet" href="../css/theme.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/components.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>tailwind.config = { theme: { extend: { colors: { primary: 'var(--primary)', 'primary-dark': 'var(--primary-dark)', 'bg-body': 'var(--bg-body)', 'bg-surface': 'var(--bg-surface)', 'bg-surface-elevated': 'var(--bg-surface-elevated)', 'text-primary': 'var(--text-primary)', 'text-secondary': 'var(--text-secondary)', 'border-color': 'var(--border-color)' }, fontFamily: { bebas: ['Bebas Neue', 'sans-serif'], display: ['Rajdhani', 'sans-serif'], body: ['Inter', 'sans-serif'] } } } }</script>
    <script src="../js/theme.js"></script>
    <script src="js/garage-data.js"></script>
    <script src="js/registration-services.js"></script>
</head>

<body class="bg-bg-body text-text-primary">
    <div class="page-wrapper container pb-32">
        <header class="app-header">
            <button onclick="window.history.back()" class="p-2 -ml-2"><span
                    class="material-symbols-outlined text-text-primary">arrow_back</span></button>
            <h1 class="header-title uppercase tracking-widest">Title Transfer</h1>
            <div class="w-10"></div>
        </header>
        <main class="animate-fade-in px-gutter">
            <div class="flex items-center justify-center gap-2 mb-6 mt-4">
                <div class="flex items-center gap-2">
                    <div
                        class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center text-xs font-bold">
                        1</div><span
                        class="text-[9px] uppercase tracking-widest text-primary font-bold">Configure</span>
                </div>
                <div class="w-12 h-0.5 bg-border-color"></div>
                <div class="flex items-center gap-2">
                    <div
                        class="w-8 h-8 rounded-full bg-border-color text-text-secondary flex items-center justify-center text-xs font-bold">
                        2</div><span class="text-[9px] uppercase tracking-widest text-text-secondary">Review</span>
                </div>
                <div class="w-12 h-0.5 bg-border-color"></div>
                <div class="flex items-center gap-2">
                    <div
                        class="w-8 h-8 rounded-full bg-border-color text-text-secondary flex items-center justify-center text-xs font-bold">
                        3</div><span class="text-[9px] uppercase tracking-widest text-text-secondary">Submit</span>
                </div>
            </div>
            <div class="bg-gradient-to-br from-primary/10 to-primary/5 border border-primary/20 rounded-2xl p-5 mb-6"
                id="vehicle-card"></div>
            <div class="bg-bg-surface border border-border-color rounded-2xl p-5 mb-6">
                <h3 class="text-sm font-black uppercase tracking-widest mb-4">Transfer Type</h3>
                <label
                    class="flex items-center gap-3 p-3 border-2 border-border-color rounded-xl mb-3 cursor-pointer hover:border-primary transition-all">
                    <input type="radio" name="transfer-type" value="sale" checked onchange="updateTransferType()">
                    <div class="flex-1">
                        <p class="text-sm font-bold">Sale (Private)</p>
                        <p class="text-xs text-text-secondary">Selling to an individual</p>
                    </div>
                </label>
                <label
                    class="flex items-center gap-3 p-3 border-2 border-border-color rounded-xl mb-3 cursor-pointer hover:border-primary transition-all">
                    <input type="radio" name="transfer-type" value="gift" onchange="updateTransferType()">
                    <div class="flex-1">
                        <p class="text-sm font-bold">Gift/Family Transfer</p>
                        <p class="text-xs text-text-secondary">Transferring to family member</p>
                    </div>
                </label>
                <label
                    class="flex items-center gap-3 p-3 border-2 border-border-color rounded-xl cursor-pointer hover:border-primary transition-all">
                    <input type="radio" name="transfer-type" value="dealer" onchange="updateTransferType()">
                    <div class="flex-1">
                        <p class="text-sm font-bold">Dealer Sale</p>
                        <p class="text-xs text-text-secondary">Selling to a dealership</p>
                    </div>
                </label>
            </div>
            <div class="bg-bg-surface border border-border-color rounded-2xl p-5 mb-6">
                <h3 class="text-sm font-black uppercase tracking-widest mb-4">Seller Information</h3>
                <div class="space-y-3">
                    <div><label
                            class="text-[8px] font-black uppercase tracking-widest text-text-secondary block mb-1">Full
                            Name</label><input type="text" id="seller-name" placeholder="As on vehicle documents"
                            class="w-full bg-bg-body border border-border-color rounded-xl p-3 text-sm"></div>
                    <div><label
                            class="text-[8px] font-black uppercase tracking-widest text-text-secondary block mb-1">Phone
                            Number</label><input type="tel" id="seller-phone" placeholder="e.g., 08012345678"
                            class="w-full bg-bg-body border border-border-color rounded-xl p-3 text-sm"></div>
                    <div><label
                            class="text-[8px] font-black uppercase tracking-widest text-text-secondary block mb-1">Email
                            Address</label><input type="email" id="seller-email" placeholder="e.g., seller@example.com"
                            class="w-full bg-bg-body border border-border-color rounded-xl p-3 text-sm"></div>
                </div>
            </div>
            <div class="bg-bg-surface border border-border-color rounded-2xl p-5 mb-6">
                <h3 class="text-sm font-black uppercase tracking-widest mb-4">Buyer Information</h3>
                <div class="space-y-3">
                    <div><label
                            class="text-[8px] font-black uppercase tracking-widest text-text-secondary block mb-1">Full
                            Name</label><input type="text" id="buyer-name" placeholder="New owner's full name"
                            class="w-full bg-bg-body border border-border-color rounded-xl p-3 text-sm"></div>
                    <div><label
                            class="text-[8px] font-black uppercase tracking-widest text-text-secondary block mb-1">Phone
                            Number</label><input type="tel" id="buyer-phone" placeholder="e.g., 08012345678"
                            class="w-full bg-bg-body border border-border-color rounded-xl p-3 text-sm"></div>
                    <div><label
                            class="text-[8px] font-black uppercase tracking-widest text-text-secondary block mb-1">Email
                            Address</label><input type="email" id="buyer-email" placeholder="e.g., buyer@example.com"
                            class="w-full bg-bg-body border border-border-color rounded-xl p-3 text-sm"></div>
                    <div><label
                            class="text-[8px] font-black uppercase tracking-widest text-text-secondary block mb-1">Address</label><textarea
                            id="buyer-address" rows="2" placeholder="Buyer's residential address"
                            class="w-full bg-bg-body border border-border-color rounded-xl p-3 text-sm resize-none"></textarea>
                    </div>
                </div>
            </div>
            <div class="bg-bg-surface border border-border-color rounded-2xl p-5 mb-6" id="sale-details-section">
                <h3 class="text-sm font-black uppercase tracking-widest mb-4">Sale Details</h3>
                <div class="space-y-3">
                    <div><label
                            class="text-[8px] font-black uppercase tracking-widest text-text-secondary block mb-1">Sale
                            Price</label><input type="number" id="sale-price" placeholder="e.g., 5000000"
                            class="w-full bg-bg-body border border-border-color rounded-xl p-3 text-sm"></div>
                    <div><label
                            class="text-[8px] font-black uppercase tracking-widest text-text-secondary block mb-1">Sale
                            Date</label><input type="date" id="sale-date"
                            class="w-full bg-bg-body border border-border-color rounded-xl p-3 text-sm"></div>
                </div>
            </div>
            <div class="bg-bg-surface border border-border-color rounded-2xl p-5 mb-6">
                <h3 class="text-sm font-black uppercase tracking-widest mb-4">Processing Options</h3>
                <label
                    class="flex items-center gap-3 p-3 border-2 border-border-color rounded-xl mb-3 cursor-pointer hover:border-primary transition-all">
                    <input type="radio" name="service-level" value="standard" checked onchange="updatePricing()">
                    <div class="flex-1">
                        <p class="text-sm font-bold">Standard (7-14 days)</p>
                        <p class="text-xs text-text-secondary">Normal processing timeline</p>
                    </div>
                    <span class="text-primary font-bold">₦260,000</span>
                </label>
                <label
                    class="flex items-center gap-3 p-3 border-2 border-border-color rounded-xl cursor-pointer hover:border-primary transition-all">
                    <input type="radio" name="service-level" value="expedited" onchange="updatePricing()">
                    <div class="flex-1">
                        <p class="text-sm font-bold">Expedited (3-5 days)</p>
                        <p class="text-xs text-text-secondary">Fast-track processing</p>
                    </div>
                    <span class="text-primary font-bold">₦350,000</span>
                </label>
            </div>
            <div class="bg-bg-surface border border-border-color rounded-2xl p-5 mb-6">
                <h3 class="text-sm font-black uppercase tracking-widest mb-4">State</h3>
                <div id="state-selector"></div>
            </div>
            <div class="bg-bg-surface border border-border-color rounded-2xl p-5 mb-6" id="document-upload"></div>
            <div class="bg-gradient-to-br from-primary/10 to-primary/5 border border-primary/20 rounded-2xl p-5 mb-6"
                id="pricing-breakdown"></div>
            <button onclick="proceedToReview()"
                class="w-full py-4 bg-primary text-white rounded-xl text-sm font-black uppercase tracking-widest shadow-lg shadow-primary/20 hover:bg-primary-dark transition-all">Proceed
                to Review</button>
        </main>
        <nav class="bottom-nav">
            <a href="../dashboard.html" class="nav-item"><span class="material-symbols-outlined">grid_view</span><span
                    class="nav-label">Home</span></a>
            <a href="../fleet.html" class="nav-item"><span class="material-symbols-outlined">explore</span><span
                    class="nav-label">Fleet</span></a>
            <a href="../garage.html" class="nav-item active"><span
                    class="material-symbols-outlined">directions_car</span><span class="nav-label">Garage</span></a>
            <a href="../inquiries.html" class="nav-item"><span class="material-symbols-outlined">forum</span><span
                    class="nav-label">Concierge</span></a>
            <a href="../settings.html" class="nav-item"><span class="material-symbols-outlined">tune</span><span
                    class="nav-label">Settings</span></a>
        </nav>
    </div>
    <script>
        let activeVehicle = null;
        function init() { const urlParams = new URLSearchParams(window.location.search), vid = urlParams.get('vid') || GarageData.getActiveVehicle()?.id; activeVehicle = GarageData.getVehicleById(vid); if (!activeVehicle) { window.location.href = 'select-vehicle.html?service=title-transfer'; return } RegistrationServices.renderVehicleCard(activeVehicle, 'vehicle-card'); RegistrationServices.renderStateSelector('state-selector', 'lagos'); RegistrationServices.renderDocumentUpload('document-upload', ['vehicle-license', 'proof-of-ownership', 'seller-id', 'buyer-id']); const today = new Date(); document.getElementById('sale-date').value = today.toISOString().split('T')[0]; document.getElementById('sale-date').max = today.toISOString().split('T')[0]; loadProgress(); updatePricing(); document.addEventListener('input', saveProgress); document.addEventListener('change', saveProgress) }
        function updateTransferType() { const type = document.querySelector('input[name="transfer-type"]:checked')?.value; const saleSection = document.getElementById('sale-details-section'); saleSection.style.display = type === 'gift' ? 'none' : 'block'; updatePricing() }
        function updatePricing() { const state = document.getElementById('state-select')?.value || 'lagos'; const stateData = RegistrationServices.STATES[state]; const serviceLevel = document.querySelector('input[name="service-level"]:checked')?.value || 'standard'; const transferType = document.querySelector('input[name="transfer-type"]:checked')?.value || 'sale'; const fees = { governmentFees: stateData.fees.titleTransfer, serviceFee: serviceLevel === 'expedited' ? 90000 : 50000, stampDuty: transferType === 'gift' ? 0 : 10000, total: 0 }; fees.total = fees.governmentFees + fees.serviceFee + fees.stampDuty; RegistrationServices.renderFeeBreakdown('pricing-breakdown', fees) }
        function saveProgress() { const config = { vehicleId: activeVehicle.id, transferType: document.querySelector('input[name="transfer-type"]:checked')?.value || 'sale', sellerName: document.getElementById('seller-name')?.value || '', sellerPhone: document.getElementById('seller-phone')?.value || '', sellerEmail: document.getElementById('seller-email')?.value || '', buyerName: document.getElementById('buyer-name')?.value || '', buyerPhone: document.getElementById('buyer-phone')?.value || '', buyerEmail: document.getElementById('buyer-email')?.value || '', buyerAddress: document.getElementById('buyer-address')?.value || '', salePrice: document.getElementById('sale-price')?.value || '', saleDate: document.getElementById('sale-date')?.value || '', serviceLevel: document.querySelector('input[name="service-level"]:checked')?.value || 'standard', state: document.getElementById('state-select')?.value || 'lagos' }; RegistrationServices.saveProgress('title-transfer', config) }
        function loadProgress() { const saved = RegistrationServices.loadProgress('title-transfer'); if (!saved) return; if (saved.transferType) { const radio = document.querySelector(`input[name="transfer-type"][value="${saved.transferType}"]`); if (radio) { radio.checked = true; updateTransferType() } } if (saved.sellerName) document.getElementById('seller-name').value = saved.sellerName; if (saved.sellerPhone) document.getElementById('seller-phone').value = saved.sellerPhone; if (saved.sellerEmail) document.getElementById('seller-email').value = saved.sellerEmail; if (saved.buyerName) document.getElementById('buyer-name').value = saved.buyerName; if (saved.buyerPhone) document.getElementById('buyer-phone').value = saved.buyerPhone; if (saved.buyerEmail) document.getElementById('buyer-email').value = saved.buyerEmail; if (saved.buyerAddress) document.getElementById('buyer-address').value = saved.buyerAddress; if (saved.salePrice) document.getElementById('sale-price').value = saved.salePrice; if (saved.saleDate) document.getElementById('sale-date').value = saved.saleDate; if (saved.serviceLevel) { const radio = document.querySelector(`input[name="service-level"][value="${saved.serviceLevel}"]`); if (radio) radio.checked = true } if (saved.state) document.getElementById('state-select').value = saved.state; updatePricing() }
        function proceedToReview() { const sellerName = document.getElementById('seller-name').value; const buyerName = document.getElementById('buyer-name').value; const buyerPhone = document.getElementById('buyer-phone').value; const buyerAddress = document.getElementById('buyer-address').value; if (!sellerName || !buyerName || !buyerPhone || !buyerAddress) { RegistrationServices.showToast('Please fill in all required fields', 'error'); return } const validation = RegistrationServices.validateDocuments(['vehicle-license', 'proof-of-ownership', 'seller-id', 'buyer-id']); if (!validation.valid) { RegistrationServices.showToast(`Missing documents: ${validation.missing.join(', ')}`, 'error'); return } saveProgress(); window.location.href = `title-transfer-review.html?vid=${activeVehicle.id}` }
        init();
    </script>
</body>

</html>
