<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Full Diagnostic | AutoGaard Workshop</title>
    <link rel="stylesheet" href="../css/theme.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/components.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: 'var(--primary)', 'primary-dark': 'var(--primary-dark)',
                        'bg-body': 'var(--bg-body)', 'bg-surface': 'var(--bg-surface)',
                        'bg-surface-elevated': 'var(--bg-surface-elevated)',
                        'text-primary': 'var(--text-primary)', 'text-secondary': 'var(--text-secondary)',
                        'border-color': 'var(--border-color)',
                    },
                    fontFamily: { bebas: ['Bebas Neue', 'sans-serif'], display: ['Rajdhani', 'sans-serif'], body: ['Inter', 'sans-serif'], }
                }
            }
        }
    </script>
    <script src="../js/theme.js"></script>
    <script src="js/garage-data.js"></script>
</head>

<body class="bg-bg-body text-text-primary">
    <div class="page-wrapper container pb-32">
        <header class="app-header">
            <button onclick="window.history.back()" class="p-2 -ml-2">
                <span class="material-symbols-outlined text-text-primary">arrow_back</span>
            </button>
            <h1 class="header-title uppercase tracking-widest">FULL DIAGNOSTIC</h1>
            <div class="w-10"></div>
        </header>

        <main class="animate-fade-in px-gutter">
            <!-- Service Header -->
            <div class="bg-primary/5 border border-primary/20 rounded-3xl p-5 mb-6 mt-4">
                <div class="flex items-center gap-3 mb-3">
                    <span class="material-symbols-outlined text-primary text-2xl">monitor_heart</span>
                    <div>
                        <h2 class="font-[var(--font-bebas)] text-xl tracking-widest">120-POINT INSPECTION</h2>
                        <p class="text-[9px] text-text-secondary uppercase tracking-widest">Comprehensive vehicle
                            assessment</p>
                    </div>
                </div>
            </div>

            <!-- Vehicle Card -->
            <div id="vehicle-card" class="bg-bg-surface border border-border-color rounded-3xl overflow-hidden mb-6">
                <!-- Populated by JS -->
            </div>

            <!-- Inspection Scope -->
            <div class="mb-6">
                <p class="text-[8px] font-black uppercase tracking-widest text-text-secondary mb-3">Inspection Includes
                </p>
                <div class="grid grid-cols-2 gap-3">
                    <div class="bg-bg-surface border border-border-color rounded-2xl p-4">
                        <span class="material-symbols-outlined text-primary text-lg mb-2 block">build</span>
                        <p class="text-[10px] font-bold uppercase tracking-widest mb-1">Engine & Transmission</p>
                        <p class="text-[8px] text-text-secondary">Full mechanical assessment</p>
                    </div>
                    <div class="bg-bg-surface border border-border-color rounded-2xl p-4">
                        <span class="material-symbols-outlined text-primary text-lg mb-2 block">electric_bolt</span>
                        <p class="text-[10px] font-bold uppercase tracking-widest mb-1">Electrical Systems</p>
                        <p class="text-[8px] text-text-secondary">Battery, alternator, wiring</p>
                    </div>
                    <div class="bg-bg-surface border border-border-color rounded-2xl p-4">
                        <span class="material-symbols-outlined text-primary text-lg mb-2 block">tire_repair</span>
                        <p class="text-[10px] font-bold uppercase tracking-widest mb-1">Suspension & Brakes</p>
                        <p class="text-[8px] text-text-secondary">Safety-critical components</p>
                    </div>
                    <div class="bg-bg-surface border border-border-color rounded-2xl p-4">
                        <span class="material-symbols-outlined text-primary text-lg mb-2 block">ac_unit</span>
                        <p class="text-[10px] font-bold uppercase tracking-widest mb-1">Climate & Comfort</p>
                        <p class="text-[8px] text-text-secondary">AC, heating, interior</p>
                    </div>
                    <div class="bg-bg-surface border border-border-color rounded-2xl p-4">
                        <span class="material-symbols-outlined text-primary text-lg mb-2 block">directions_car</span>
                        <p class="text-[10px] font-bold uppercase tracking-widest mb-1">Body & Paint</p>
                        <p class="text-[8px] text-text-secondary">Exterior condition check</p>
                    </div>
                    <div class="bg-bg-surface border border-border-color rounded-2xl p-4">
                        <span class="material-symbols-outlined text-primary text-lg mb-2 block">computer</span>
                        <p class="text-[10px] font-bold uppercase tracking-widest mb-1">Tech & Electronics</p>
                        <p class="text-[8px] text-text-secondary">Infotainment, sensors</p>
                    </div>
                </div>
            </div>

            <!-- Service Details -->
            <div class="bg-bg-surface-elevated border border-border-color rounded-3xl p-5 mb-6">
                <p class="text-[8px] font-black uppercase tracking-widest text-text-secondary mb-4">What You Get</p>
                <div class="space-y-3">
                    <div class="flex items-start gap-3">
                        <span class="material-symbols-outlined text-primary text-sm mt-0.5">check_circle</span>
                        <p class="text-[10px] leading-tight">Detailed 120-point inspection report with photos</p>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="material-symbols-outlined text-primary text-sm mt-0.5">check_circle</span>
                        <p class="text-[10px] leading-tight">Priority-ranked repair recommendations</p>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="material-symbols-outlined text-primary text-sm mt-0.5">check_circle</span>
                        <p class="text-[10px] leading-tight">Estimated repair costs for identified issues</p>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="material-symbols-outlined text-primary text-sm mt-0.5">check_circle</span>
                        <p class="text-[10px] leading-tight">Vehicle health score and resale value impact</p>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="material-symbols-outlined text-primary text-sm mt-0.5">check_circle</span>
                        <p class="text-[10px] leading-tight">30-day warranty on inspection accuracy</p>
                    </div>
                </div>
            </div>

            <!-- Pricing -->
            <div class="bg-bg-surface border border-border-color rounded-3xl p-5 mb-6">
                <div class="flex items-center justify-between mb-4 pb-4 border-b border-border-color">
                    <span class="text-[10px] font-black uppercase tracking-widest">Service Fee</span>
                    <span class="text-2xl font-bold text-primary">₦85,000</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="material-symbols-outlined text-green-400 text-sm">verified</span>
                    <p class="text-[9px] text-text-secondary uppercase tracking-widest">Certified ASE Technicians</p>
                </div>
            </div>

            <!-- Schedule Options -->
            <div class="mb-6">
                <p class="text-[8px] font-black uppercase tracking-widest text-text-secondary mb-3">Preferred Schedule
                </p>
                <div class="space-y-3">
                    <label
                        class="flex items-center gap-4 p-4 bg-bg-surface border border-border-color rounded-2xl cursor-pointer hover:border-primary transition-all">
                        <input type="radio" name="schedule" value="asap" checked>
                        <div class="flex-1">
                            <p class="text-sm font-bold">As Soon As Possible</p>
                            <p class="text-[9px] text-text-secondary uppercase tracking-widest mt-0.5">Next available
                                slot</p>
                        </div>
                    </label>
                    <label
                        class="flex items-center gap-4 p-4 bg-bg-surface border border-border-color rounded-2xl cursor-pointer hover:border-primary transition-all">
                        <input type="radio" name="schedule" value="specific">
                        <div class="flex-1">
                            <p class="text-sm font-bold">Specific Date & Time</p>
                            <p class="text-[9px] text-text-secondary uppercase tracking-widest mt-0.5">Choose your
                                preferred slot</p>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-3">
                <button onclick="window.history.back()"
                    class="flex-1 py-4 bg-bg-surface border border-border-color rounded-xl text-[11px] font-black uppercase tracking-widest">Cancel</button>
                <button onclick="bookDiagnostic()"
                    class="flex-1 py-4 bg-primary text-white rounded-xl text-[11px] font-black uppercase tracking-widest shadow-lg shadow-primary/20">Book
                    Now</button>
            </div>
        </main>

        <nav class="bottom-nav">
            <a href="../dashboard.html" class="nav-item">
                <span class="material-symbols-outlined">grid_view</span>
                <span class="nav-label">Home</span>
            </a>
            <a href="../fleet.html" class="nav-item">
                <span class="material-symbols-outlined">explore</span>
                <span class="nav-label">Fleet</span>
            </a>
            <a href="../garage.html" class="nav-item active">
                <span class="material-symbols-outlined">directions_car</span>
                <span class="nav-label">Garage</span>
            </a>
            <a href="../inquiries.html" class="nav-item">
                <span class="material-symbols-outlined">forum</span>
                <span class="nav-label">Concierge</span>
            </a>
            <a href="../settings.html" class="nav-item">
                <span class="material-symbols-outlined">tune</span>
                <span class="nav-label">Settings</span>
            </a>
        </nav>
    </div>

    <script>
        let activeVehicle = null;

        window.addEventListener('DOMContentLoaded', () => {
            activeVehicle = GarageData.getActiveVehicle();
            if (!activeVehicle) {
                window.location.href = 'select-vehicle.html?service=diagnostic';
                return;
            }
            renderVehicleCard();
        });

        function renderVehicleCard() {
            const v = activeVehicle;
            document.getElementById('vehicle-card').innerHTML = `
                <div class="relative h-32 overflow-hidden">
                    <img src="${v.image}" class="w-full h-full object-cover" alt="">
                    <div class="absolute inset-0 bg-gradient-to-t from-bg-surface via-transparent to-transparent"></div>
                    <div class="absolute bottom-3 left-4">
                        <h3 class="text-lg font-[var(--font-bebas)] text-white tracking-widest">${v.year} ${v.make.toUpperCase()} ${v.model.toUpperCase()}</h3>
                        <p class="text-[8px] text-white/60 uppercase tracking-widest font-bold mt-0.5">VIN: ${v.vin.slice(-8)}</p>
                    </div>
                </div>
                <div class="p-4 grid grid-cols-2 gap-3">
                    <div>
                        <p class="text-[7px] font-black uppercase tracking-widest opacity-40 mb-1">Mileage</p>
                        <p class="text-sm font-bold">${(v.mileage / 1000).toFixed(0)}K KM</p>
                    </div>
                    <div class="text-right">
                        <p class="text-[7px] font-black uppercase tracking-widest opacity-40 mb-1">Current Value</p>
                        <p class="text-sm font-bold text-primary">${GarageData.formatCurrency(v.currentValue)}</p>
                    </div>
                </div>`;
        }

        function bookDiagnostic() {
            const schedule = document.querySelector('input[name="schedule"]:checked').value;

            const serviceRecord = GarageData.createServiceRecord({
                vehicleId: activeVehicle.id,
                type: 'diagnostic',
                title: 'Full Diagnostic — 120-Point Inspection',
                partnerName: 'AutoCraft Lagos Terminal',
                invoiceTotal: 85000,
                beforeScores: {
                    beauty: 5, performance: 6, comfort: 5, tech: 3,
                    value: activeVehicle.currentValue
                },
                afterScores: {
                    beauty: 5, performance: 6, comfort: 5, tech: 3,
                    value: activeVehicle.currentValue
                },
                lineItems: [
                    { name: 'Full Diagnostic — 120-Point Inspection', price: 85000 }
                ],
                details: { schedule }
            });

            window.location.href = `contract-sign.html?sid=${serviceRecord.id}`;
        }
    </script>
</body>

</html>
